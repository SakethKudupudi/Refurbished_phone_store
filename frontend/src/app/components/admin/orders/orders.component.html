<div class="admin-orders-container">
  <!-- Header -->
  <header class="admin-header">
    <div class="header-left">
      <h1>ğŸ“¦ Admin Orders Management</h1>
      <p class="subtitle">Monitor and manage all platform orders</p>
    </div>
    <div class="header-right">
      <button class="btn-secondary" (click)="navigateToDashboard()">
        <i class="icon">ğŸ“Š</i> Dashboard
      </button>
      <button class="btn-secondary" (click)="navigateToAnalytics()">
        <i class="icon">ğŸ“ˆ</i> Analytics
      </button>
      <button class="btn-secondary" (click)="navigateToUsers()">
        <i class="icon">ğŸ‘¥</i> Users
      </button>
      <button class="btn-logout" (click)="logout()">
        <i class="icon">ğŸšª</i> Logout
      </button>
    </div>
  </header>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div class="stat-card total">
      <div class="stat-icon">ğŸ“‹</div>
      <div class="stat-content">
        <h3>Total Orders</h3>
        <p class="stat-value">{{ stats.total }}</p>
      </div>
    </div>
    
    <div class="stat-card pending">
      <div class="stat-icon">â³</div>
      <div class="stat-content">
        <h3>Pending</h3>
        <p class="stat-value">{{ stats.pending }}</p>
      </div>
    </div>
    
    <div class="stat-card processing">
      <div class="stat-icon">âš™ï¸</div>
      <div class="stat-content">
        <h3>Processing</h3>
        <p class="stat-value">{{ stats.processing }}</p>
      </div>
    </div>
    
    <div class="stat-card shipped">
      <div class="stat-icon">ğŸšš</div>
      <div class="stat-content">
        <h3>Shipped</h3>
        <p class="stat-value">{{ stats.shipped }}</p>
      </div>
    </div>
    
    <div class="stat-card delivered">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <h3>Delivered</h3>
        <p class="stat-value">{{ stats.delivered }}</p>
      </div>
    </div>
    
    <div class="stat-card revenue">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <h3>Total Revenue</h3>
        <p class="stat-value">${{ stats.totalRevenue.toFixed(2) }}</p>
      </div>
    </div>
    
    <div class="stat-card today">
      <div class="stat-icon">ğŸ“…</div>
      <div class="stat-content">
        <h3>Today's Orders</h3>
        <p class="stat-value">{{ stats.todayOrders }}</p>
      </div>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchQuery" 
        (ngModelChange)="applyFilters()"
        placeholder="Search by order #, customer, or vendor..."
        class="search-input">
      <i class="search-icon">ğŸ”</i>
    </div>

    <div class="filters">
      <select [(ngModel)]="filterStatus" (ngModelChange)="applyFilters()" class="filter-select">
        <option value="all">All Status</option>
        <option value="pending">Pending</option>
        <option value="confirmed">Confirmed</option>
        <option value="processing">Processing</option>
        <option value="shipped">Shipped</option>
        <option value="delivered">Delivered</option>
        <option value="cancelled">Cancelled</option>
      </select>

      <select [(ngModel)]="filterPayment" (ngModelChange)="applyFilters()" class="filter-select">
        <option value="all">All Payments</option>
        <option value="pending">Pending</option>
        <option value="paid">Paid</option>
        <option value="refunded">Refunded</option>
      </select>

      <select [(ngModel)]="sortBy" (ngModelChange)="sortOrders()" class="filter-select">
        <option value="date-desc">Latest First</option>
        <option value="date-asc">Oldest First</option>
        <option value="amount-desc">Highest Amount</option>
        <option value="amount-asc">Lowest Amount</option>
      </select>

      <button class="btn-export" (click)="exportOrders()">
        <i class="icon">ğŸ“¥</i> Export CSV
      </button>
    </div>
  </div>

  <!-- Orders Table -->
  <div class="orders-table-container">
    <table class="orders-table">
      <thead>
        <tr>
          <th>Order #</th>
          <th>Customer</th>
          <th>Vendor</th>
          <th>Items</th>
          <th>Amount</th>
          <th>Status</th>
          <th>Payment</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of filteredOrders">
          <td>
            <strong>{{ order.orderNumber }}</strong>
          </td>
          <td>
            <div class="customer-info">
              <strong>{{ order.customerName }}</strong>
              <small>{{ order.customerEmail }}</small>
            </div>
          </td>
          <td>
            <span class="vendor-name">{{ order.vendorName }}</span>
          </td>
          <td>
            <span class="items-count">{{ order.items.length }} item(s)</span>
          </td>
          <td>
            <strong class="amount">${{ order.totalAmount.toFixed(2) }}</strong>
          </td>
          <td>
            <span class="status-badge" [ngClass]="getStatusClass(order.status)">
              {{ order.status | titlecase }}
            </span>
          </td>
          <td>
            <span class="payment-badge" [ngClass]="getPaymentStatusClass(order.paymentStatus)">
              {{ order.paymentStatus | titlecase }}
            </span>
          </td>
          <td>
            <small>{{ formatDate(order.orderDate) }}</small>
          </td>
          <td>
            <div class="action-buttons">
              <button class="btn-icon" (click)="viewOrderDetails(order)" title="View Details">
                ğŸ‘ï¸
              </button>
            </div>
          </td>
        </tr>
        <tr *ngIf="filteredOrders.length === 0">
          <td colspan="9" class="no-data">
            <div class="empty-state">
              <i class="empty-icon">ğŸ“¦</i>
              <p>No orders found</p>
              <small>Try adjusting your filters or search query</small>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Order Details Modal -->
<div class="modal-overlay" *ngIf="showOrderDetails" (click)="closeOrderDetails()">
  <div class="modal-content order-details-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Order Details - {{ selectedOrder?.orderNumber }}</h2>
      <button class="btn-close" (click)="closeOrderDetails()">Ã—</button>
    </div>
    
    <div class="modal-body" *ngIf="selectedOrder">
      <div class="details-grid">
        <!-- Customer Information -->
        <div class="detail-section">
          <h3>Customer Information</h3>
          <div class="detail-item">
            <label>Name:</label>
            <span>{{ selectedOrder.customerName }}</span>
          </div>
          <div class="detail-item">
            <label>Email:</label>
            <span>{{ selectedOrder.customerEmail }}</span>
          </div>
        </div>

        <!-- Vendor Information -->
        <div class="detail-section">
          <h3>Vendor Information</h3>
          <div class="detail-item">
            <label>Vendor:</label>
            <span>{{ selectedOrder.vendorName }}</span>
          </div>
        </div>

        <!-- Order Information -->
        <div class="detail-section">
          <h3>Order Information</h3>
          <div class="detail-item">
            <label>Order Number:</label>
            <span><strong>{{ selectedOrder.orderNumber }}</strong></span>
          </div>
          <div class="detail-item">
            <label>Order Date:</label>
            <span>{{ formatDate(selectedOrder.orderDate) }}</span>
          </div>
          <div class="detail-item">
            <label>Status:</label>
            <span class="status-badge" [ngClass]="getStatusClass(selectedOrder.status)">
              {{ selectedOrder.status | titlecase }}
            </span>
          </div>
          <div class="detail-item">
            <label>Payment Status:</label>
            <span class="payment-badge" [ngClass]="getPaymentStatusClass(selectedOrder.paymentStatus)">
              {{ selectedOrder.paymentStatus | titlecase }}
            </span>
          </div>
        </div>

        <!-- Shipping Information -->
        <div class="detail-section full-width">
          <h3>Shipping Information</h3>
          <div class="detail-item">
            <label>Shipping Address:</label>
            <span>{{ selectedOrder.shippingAddress }}</span>
          </div>
          <div class="detail-item" *ngIf="selectedOrder.trackingNumber">
            <label>Tracking Number:</label>
            <span><strong>{{ selectedOrder.trackingNumber }}</strong></span>
          </div>
        </div>

        <!-- Order Items -->
        <div class="detail-section full-width">
          <h3>Order Items</h3>
          <table class="items-table">
            <thead>
              <tr>
                <th>Product</th>
                <th>Type</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Subtotal</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of selectedOrder.items">
                <td>{{ item.productName }}</td>
                <td><span class="type-badge">{{ item.type }}</span></td>
                <td>{{ item.quantity }}</td>
                <td>${{ item.price.toFixed(2) }}</td>
                <td><strong>${{ item.subtotal.toFixed(2) }}</strong></td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="4" class="text-right"><strong>Total Amount:</strong></td>
                <td><strong class="total-amount">${{ selectedOrder.totalAmount.toFixed(2) }}</strong></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-primary" (click)="closeOrderDetails()">Close</button>
    </div>
  </div>
</div>
