<app-customer-header></app-customer-header>

<div class="component-list-container">
  <header class="component-header">
    <button class="back-button" (click)="goBack()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
      Back
    </button>
    <h1 class="component-title animate-fade-in">{{ modelName }} Parts</h1>
    <p class="component-subtitle animate-fade-in delay-1">Premium quality replacement parts</p>
  </header>

  <!-- Filter Section -->
  <div class="filter-section animate-fade-in delay-2">
    <div class="filter-chips">
      <button 
        class="filter-chip" 
        [class.active]="selectedCategory === ''"
        (click)="filterByCategory('')">
        All Parts
      </button>
      <button 
        class="filter-chip" 
        *ngFor="let category of categories"
        [class.active]="selectedCategory === category"
        (click)="filterByCategory(category)">
        {{ category }}
      </button>
    </div>
  </div>

  <div class="loading-spinner" *ngIf="loading">
    <div class="spinner"></div>
    <p>Loading parts...</p>
  </div>

  <div class="components-grid" *ngIf="!loading">
    <div class="component-card scale-up" 
         *ngFor="let component of filteredComponents; let i = index"
         [class.delay-1]="i % 3 === 0"
         [class.delay-2]="i % 3 === 1"
         [class.delay-3]="i % 3 === 2">
      <div class="component-image-wrapper">
        <img [src]="component.image" [alt]="component.name" class="component-image">
        <div class="component-gradient"></div>
        <span class="stock-badge" [class.low-stock]="component.stock < 10">
          {{ component.stock > 0 ? component.stock + ' in stock' : 'Out of stock' }}
        </span>
      </div>
      <div class="component-content">
        <div class="component-category">{{ component.category }}</div>
        <h3 class="component-name">{{ component.name }}</h3>
        <p class="component-description">{{ component.description }}</p>
        
        <div class="component-features">
          <span class="feature-tag" *ngFor="let feature of component.features">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            {{ feature }}
          </span>
        </div>

        <div class="component-footer">
          <div class="price-section">
            <span class="price">${{ component.price }}</span>
            <span class="price-note">+ tax</span>
          </div>
          <button class="add-to-cart-btn" (click)="addToCart(component)">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="no-results" *ngIf="!loading && filteredComponents.length === 0">
    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"></circle>
      <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
    <p>No parts found for this filter</p>
  </div>

  <!-- Cart Button -->
  <button class="floating-cart-btn" *ngIf="cartItemsCount > 0" (click)="goToCart()">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="9" cy="21" r="1"></circle>
      <circle cx="20" cy="21" r="1"></circle>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
    </svg>
    <span class="cart-count">{{ cartItemsCount }}</span>
  </button>
</div>
